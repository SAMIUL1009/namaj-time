<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü‡¶∏‡ßÇ‡¶ö‡¶ø</title>
    <link rel="stylesheet" href="style.css">

    <!-- Firebase SDKs -->
    <script type="module">
        // Import Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

        // Firebase config
        const firebaseConfig = {
          apiKey: "AIzaSyA2e16SWt6tM3q76M8deUWiEz3cNqHCc7A",
          authDomain: "namaz-schedule.firebaseapp.com",
          databaseURL: "https://namaz-schedule-default-rtdb.firebaseio.com",
          projectId: "namaz-schedule",
          storageBucket: "namaz-schedule.appspot.com",
          messagingSenderId: "242449317130",
          appId: "1:242449317130:web:c6945e81f906909a258ef3",
          measurementId: "G-7N0EZFMTTQ"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        let isAdmin = true; // false ‡¶ï‡¶∞‡¶≤‡ßá ‡¶™‡¶æ‡¶¨‡¶≤‡¶ø‡¶ï ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶¶‡ßá‡¶ñ‡¶¨‡ßá

        window.onload = function () {
            // Admin control
            document.querySelectorAll("input[type=time]").forEach(input => {
                input.readOnly = !isAdmin;
            });
            document.getElementById("saveBtn").style.display = isAdmin ? "block" : "none";

            // Load times from Firebase
            const dbRef = ref(database);
            get(child(dbRef, 'namazTimes')).then((snapshot) => {
                if (snapshot.exists()) {
                    const t = snapshot.val();
                    document.getElementById("fajr").value = t.fajr;
                    document.getElementById("fajr_j").value = t.fajr_j;
                    document.getElementById("zuhr").value = t.zuhr;
                    document.getElementById("zuhr_j").value = t.zuhr_j;
                    document.getElementById("asr").value = t.asr;
                    document.getElementById("asr_j").value = t.asr_j;
                    document.getElementById("maghrib").value = t.maghrib;
                    document.getElementById("maghrib_j").value = t.maghrib_j;
                    document.getElementById("isha").value = t.isha;
                    document.getElementById("isha_j").value = t.isha_j;
                }
            }).catch((error) => {
                console.error(error);
            });
        };

        // Save button
        window.saveTimes = function() {
            const times = {
                fajr: document.getElementById("fajr").value,
                fajr_j: document.getElementById("fajr_j").value,
                zuhr: document.getElementById("zuhr").value,
                zuhr_j: document.getElementById("zuhr_j").value,
                asr: document.getElementById("asr").value,
                asr_j: document.getElementById("asr_j").value,
                maghrib: document.getElementById("maghrib").value,
                maghrib_j: document.getElementById("maghrib_j").value,
                isha: document.getElementById("isha").value,
                isha_j: document.getElementById("isha_j").value
            };
            set(ref(database, 'namazTimes'), times)
                .then(() => { alert("‡¶∏‡¶Æ‡ßü‡¶ó‡ßÅ‡¶≤‡ßã Firebase ‡¶è ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!"); })
                .catch((error) => { console.error(error); });
        };
    </script>
</head>
<body>

<div class="mosque-name">
    ‡¶®‡¶ì‡¶¶‡¶æ ‡¶∏‡¶ø‡¶®‡ßç‡¶¶‡ßÅ‡¶∞‡¶æ‡¶™‡¶æ‡ßú‡¶æ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶
</div>

<div class="header">
    <h1>üïå ‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú‡ßá‡¶∞ ‡¶∏‡¶Æ‡ßü‡¶∏‡ßÇ‡¶ö‡¶ø</h1>
</div>

<div class="container">
    <table>
        <tr>
            <th>‡¶®‡¶æ‡¶Æ‡¶æ‡¶ú</th>
            <th>‡¶Ü‡¶ú‡¶æ‡¶®</th>
            <th>‡¶ú‡¶æ‡¶Æ‡¶æ‡¶§</th>
        </tr>

        <tr>
            <td>‡¶´‡¶ú‡¶∞</td>
            <td><input type="time" id="fajr"></td>
            <td><input type="time" id="fajr_j"></td>
        </tr>

        <tr>
            <td>‡¶Ø‡ßã‡¶π‡¶∞</td>
            <td><input type="time" id="zuhr"></td>
            <td><input type="time" id="zuhr_j"></td>
        </tr>

        <tr>
            <td>‡¶Ü‡¶∏‡¶∞</td>
            <td><input type="time" id="asr"></td>
            <td><input type="time" id="asr_j"></td>
        </tr>

        <tr>
            <td>‡¶Æ‡¶æ‡¶ó‡¶∞‡¶ø‡¶¨</td>
            <td><input type="time" id="maghrib"></td>
            <td><input type="time" id="maghrib_j"></td>
        </tr>

        <tr>
            <td>‡¶á‡¶∂‡¶æ</td>
            <td><input type="time" id="isha"></td>
            <td><input type="time" id="isha_j"></td>
        </tr>
    </table>

    <button id="saveBtn" onclick="saveTimes()">‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
</div>

</body>
</html>
